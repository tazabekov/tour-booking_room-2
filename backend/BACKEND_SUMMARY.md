# Backend Summary - Tour Booking API

## –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### ‚úÖ –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database.py          # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SQLite
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/              # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tour.py          # Tour –∏ Booking –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ schemas/             # Pydantic —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tour.py          # TourResponse, BookingCreate –∏ –¥—Ä.
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ crud/                # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tour.py          # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ api/                 # API endpoints
‚îÇ       ‚îî‚îÄ‚îÄ v1/
‚îÇ           ‚îú‚îÄ‚îÄ __init__.py
‚îÇ           ‚îú‚îÄ‚îÄ tours.py     # /api/v1/tours/
‚îÇ           ‚îî‚îÄ‚îÄ bookings.py  # /api/v1/bookings/
‚îÇ
‚îú‚îÄ‚îÄ init_db.py               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î + 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç—É—Ä–æ–≤
‚îú‚îÄ‚îÄ verify_db.py             # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ë–î
‚îú‚îÄ‚îÄ requirements.txt         # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example             # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .gitignore              # Git –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ setup.bat / setup.sh     # –°–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ start.bat / start.sh     # –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ README.md               # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICK_START.md          # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ BACKEND_SUMMARY.md      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ API Endpoints

### Tours (–¢—É—Ä—ã)

#### GET /api/v1/tours/
- –°–ø–∏—Å–æ–∫ —Ç—É—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –§–∏–ª—å—Ç—Ä—ã:
  - `country` - –ø–æ–∏—Å–∫ –ø–æ —Å—Ç—Ä–∞–Ω–µ
  - `min_price` / `max_price` - –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω
  - `start_date` / `end_date` - –¥–∞—Ç—ã —Ç—É—Ä–∞
  - `page` / `page_size` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è

#### GET /api/v1/tours/{tour_id}
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç—É—Ä–∞

### Bookings (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)

#### POST /api/v1/bookings/
- –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Å—Ç
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ available_slots

#### GET /api/v1/bookings/{booking_id}
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### GET /api/v1/bookings/?email=...
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –ø–æ email

### System

#### GET /health
- Health check endpoint

## ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite

### –¢–∞–±–ª–∏—Ü–∞: tours
- `id` - PRIMARY KEY
- `title`, `country`, `city` - –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞
- `price` - —Ü–µ–Ω–∞ –∑–∞ —á–µ–ª–æ–≤–µ–∫–∞
- `duration_days` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- `max_people` - –º–∞–∫—Å–∏–º—É–º –ª—é–¥–µ–π
- `available_slots` - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Å—Ç–∞ (–∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏)
- `image_url` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `start_date`, `end_date` - –¥–∞—Ç—ã —Ç—É—Ä–∞
- `created_at`, `updated_at` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

**–ò–Ω–¥–µ–∫—Å—ã:** country, price, start_date, end_date (–¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤)

### –¢–∞–±–ª–∏—Ü–∞: bookings
- `id` - PRIMARY KEY
- `tour_id` - FOREIGN KEY –∫ tours
- `customer_name`, `customer_email`, `customer_phone` - –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞
- `number_of_people` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫
- `total_price` - –æ–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `booking_date` - –¥–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `status` - —Å—Ç–∞—Ç—É—Å (confirmed/cancelled)
- `notes` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

**–ò–Ω–¥–µ–∫—Å—ã:** tour_id, customer_email, status

## ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

10 —Ç—É—Ä–æ–≤ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º:
1. üáπüá∑ –°—Ç–∞–º–±—É–ª, –¢—É—Ä—Ü–∏—è - $450
2. üá´üá∑ –ü–∞—Ä–∏–∂, –§—Ä–∞–Ω—Ü–∏—è - $890
3. üáÆüáπ –†–∏–º, –ò—Ç–∞–ª–∏—è - $750
4. üá™üá∏ –ë–∞—Ä—Å–µ–ª–æ–Ω–∞, –ò—Å–ø–∞–Ω–∏—è - $680
5. üá≥üá± –ê–º—Å—Ç–µ—Ä–¥–∞–º, –ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã - $590
6. üá®üáø –ü—Ä–∞–≥–∞, –ß–µ—Ö–∏—è - $420
7. üá¶üáπ –í–µ–Ω–∞, –ê–≤—Å—Ç—Ä–∏—è - $720
8. üá¨üáß –õ–æ–Ω–¥–æ–Ω, –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è - $950
9. üá¨üá∑ –ê—Ñ–∏–Ω—ã, –ì—Ä–µ—Ü–∏—è - $580
10. üá¶üá™ –î—É–±–∞–π, –û–ê–≠ - $1200

## ‚úÖ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FastAPI 0.109.0** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy 2.0.25** - async ORM
- **Pydantic 2.5.3** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **aiosqlite 0.19.0** - async SQLite –¥—Ä–∞–π–≤–µ—Ä
- **Uvicorn 0.27.0** - ASGI —Å–µ—Ä–≤–µ—Ä

## ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Å–µ user input –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—é
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ORM (–Ω–µ raw SQL) - –∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö origins
- ‚úÖ .env —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ .gitignore
- ‚úÖ Type hints –Ω–∞ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö

## ‚úÖ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Async/Await
–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥:
- Async database sessions (aiosqlite)
- Async route handlers
- Async CRUD operations

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- **3-layer architecture**: API ‚Üí CRUD ‚Üí Models
- **Dependency Injection** –¥–ª—è database sessions
- **Pydantic schemas** –¥–ª—è request/response –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **Type hints** –≤–µ–∑–¥–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤

### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç `total_price` –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `available_slots` –ø–µ—Ä–µ–¥ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ `available_slots`
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ö

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ú–µ—Ç–æ–¥ 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# Windows
setup.bat
start.bat

# Linux/Mac
chmod +x setup.sh start.sh
./setup.sh
./start.sh
```

### –ú–µ—Ç–æ–¥ 2: –í—Ä—É—á–Ω—É—é
```bash
# 1. –°–æ–∑–¥–∞—Ç—å venv
python -m venv venv

# 2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –°–æ–∑–¥–∞—Ç—å .env
cp .env.example .env

# 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ë–î
python init_db.py

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
uvicorn app.main:app --reload
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **OpenAPI JSON**: http://localhost:8000/openapi.json

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –° –ø–æ–º–æ—â—å—é Swagger UI
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:8000/docs
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ª—é–±–æ–π endpoint
3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

### –° –ø–æ–º–æ—â—å—é curl
```bash
# –°–ø–∏—Å–æ–∫ —Ç—É—Ä–æ–≤
curl http://localhost:8000/api/v1/tours/

# –° —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
curl "http://localhost:8000/api/v1/tours/?country=–§—Ä–∞–Ω—Ü–∏—è&min_price=500"

# –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
curl -X POST http://localhost:8000/api/v1/bookings/ \
  -H "Content-Type: application/json" \
  -d '{"tour_id":1,"customer_name":"Test","customer_email":"test@test.com","customer_phone":"+1234567890","number_of_people":2}'
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Windows Console Encoding
–ù–∞ Windows –ø—Ä–∏ –≤—ã–≤–æ–¥–µ SQLAlchemy –ª–æ–≥–æ–≤ –º–æ–≥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –æ—à–∏–±–∫–∏ Unicode:
```
UnicodeEncodeError: 'charmap' codec can't encode character...
```

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –î–∞–Ω–Ω—ã–µ –≤ –ë–î —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –≠—Ç–æ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å.

**–†–µ—à–µ–Ω–∏–µ:**
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å (–¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- –û—Ç–∫–ª—é—á–∏—Ç—å debug —Ä–µ–∂–∏–º –≤ `.env`: `DEBUG=false`

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–î–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –ó–∞–º–µ–Ω–∏—Ç—å SQLite –Ω–∞ PostgreSQL
2. –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (JWT)
3. –î–æ–±–∞–≤–∏—Ç—å rate limiting
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS
5. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã
6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
7. –ù–∞–ø–∏—Å–∞—Ç—å unit/integration —Ç–µ—Å—Ç—ã
8. –î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic (–≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ create_all)

## ‚úÖ –ò—Ç–æ–≥–æ

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π backend –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ —Ç—É—Ä–æ–≤:**
- ‚úÖ 10 API endpoints
- ‚úÖ 2 —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- ‚úÖ 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç—É—Ä–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (1 –∫–æ–º–∞–Ω–¥–∞)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ (1 –∫–æ–º–∞–Ω–¥–∞)
